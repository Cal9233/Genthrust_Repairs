# Netlify Configuration for GenThrust RO Tracker Frontend

[build]
  # Build command - runs in repair-dashboard directory
  command = "cd repair-dashboard && npm install --include=dev && npm run build"

  # Publish directory - where Vite outputs the built files
  publish = "repair-dashboard/dist"

  # Base directory (optional, but clarifies project structure)
  base = "/"

[build.environment]
  # Node.js version
  NODE_VERSION = "18"
  NPM_VERSION = "10"

# SPA routing - redirect all routes to index.html for client-side routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Security headers
[[headers]]
  for = "/*"
  [headers.values]
    # Security headers
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
    Referrer-Policy = "strict-origin-when-cross-origin"

    # Cache control for assets
    Cache-Control = "public, max-age=31536000, immutable"

# Don't cache index.html
[[headers]]
  for = "/index.html"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"

# IMPORTANT: Environment variables must be set in Netlify Dashboard
# Go to: Site Settings > Environment Variables
# Add the following variables (values shown are for reference):
#
# VITE_CLIENT_ID=ee8cb926-5dda-4bbf-9360-dd94d7c433e1
# VITE_TENANT_ID=ddb0202c-cb5f-425e-891a-5666e58d9ad5
# VITE_BACKEND_URL=https://YOUR-BACKEND-URL.onrender.com
# VITE_API_BASE_URL=https://YOUR-BACKEND-URL.onrender.com/api
# VITE_SHAREPOINT_SITE_URL=https://genthrustxvii.sharepoint.com/sites/PartsQuotationsWebsite
# VITE_EXCEL_FILE_NAME=Book.xlsx
# VITE_EXCEL_TABLE_NAME=Repairs
# VITE_SHOP_TABLE_NAME=Table3
# VITE_INVENTORY_WORKBOOK_ID=01RD47DPWM335G2HPETNDZ5YGZIGVO4BYY
#
# DO NOT ADD: VITE_ANTHROPIC_API_KEY (security risk - should only be in backend)
